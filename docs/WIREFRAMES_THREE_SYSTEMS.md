# Three System Architectures: Wireframes and User Flows

**Document Purpose:** Visual comparison of three approaches to HLS/DASH manifest viewing

**Systems:**
1. Current v1.0.0 (Comprehensive Analysis Tool)
2. New Vision (Minimalistic Spec Validator with Auto-Interception)
3. Best of Both Worlds (Integrated Dual-Mode System)

---

## SYSTEM 1: Current v1.0.0 - "Comprehensive Analysis Tool"

### Entry Points (4 Ways to Access)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SYSTEM 1: ENTRY POINTS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENTRY 1: Extension Icon Click
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chrome     â”‚  User clicks extension icon
â”‚   Toolbar    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [ğŸ¬ Icon]  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   POPUP (400x600px)  â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚Det..â”‚Hist.â”‚Sett. â”‚ â”‚ â† 3 tabs
                    â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚                      â”‚
                    â”‚ ğŸ“‹ Detected (3):     â”‚
                    â”‚ â€¢ master.m3u8 (HLS)  â”‚ â† Click
                    â”‚ â€¢ stream.mpd (DASH)  â”‚    opens
                    â”‚ â€¢ live.m3u8 (HLS)    â”‚    viewer
                    â”‚                      â”‚
                    â”‚ [Open Full Viewer]   â”‚ â† Manual URL
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENTRY 2: DevTools Panel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chrome DevTools (F12)          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Elementsâ”‚Consoleâ”‚Networkâ”‚... â”‚ â”‚
â”‚ â”‚  Manifests  â”‚â† New tab       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ Detected Manifests (2):          â”‚
â”‚ âœ“ master.m3u8 (HLS)  [Analyze]  â”‚ â† Click
â”‚ âœ“ stream.mpd (DASH)  [Analyze]  â”‚    opens
â”‚                                  â”‚    viewer
â”‚ Polling every 2s for updates     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENTRY 3: Right-Click Context Menu
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Page                     â”‚
â”‚                                â”‚
â”‚   <a href="master.m3u8">       â”‚
â”‚      Stream Link               â”‚ â† Right-click
â”‚   </a>                         â”‚
â”‚                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚ Open link in new tab     â”‚ â”‚
â”‚   â”‚ Open link in new window  â”‚ â”‚
â”‚   â”‚ Copy link address        â”‚ â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚   â”‚ â–¶ Analyze with HLS+DASH  â”‚ â”‚ â† Opens viewer
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENTRY 4: Direct Viewer Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Full Viewer Tab               â”‚
â”‚  chrome-extension://[id]/...   â”‚
â”‚                                â”‚
â”‚  Manual URL entry and load     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Main Viewer Interface (System 1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYSTEM 1 VIEWER - Comprehensive Analysis Tool                   [Export â–¼] [âš¡]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ URL: https://example.com/stream/master.m3u8                    [Copy]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  [ Raw ]  [ Structured ]  [ Timeline ]     â† VIEW MODE TABS                â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  IF RAW VIEW SELECTED:                                                     â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚ â”‚  â”‚ 1  #EXTM3U                                           â† Line numbers    â”‚â”‚â”‚
â”‚ â”‚  â”‚ 2  #EXT-X-VERSION:6                                  â† Syntax          â”‚â”‚â”‚
â”‚ â”‚  â”‚ 3  #EXT-X-STREAM-INF:BANDWIDTH=2227464,CODECS=...   â† highlighted     â”‚â”‚â”‚
â”‚ â”‚  â”‚ 4  gear4/prog_index.m3u8                                               â”‚â”‚â”‚
â”‚ â”‚  â”‚ 5  #EXT-X-STREAM-INF:BANDWIDTH=8400000,CODECS=...                      â”‚â”‚â”‚
â”‚ â”‚  â”‚ 6  gear5/prog_index.m3u8                                               â”‚â”‚â”‚
â”‚ â”‚  â”‚                                                                        â”‚â”‚â”‚
â”‚ â”‚  â”‚ [Copy to Clipboard]                                                    â”‚â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  IF STRUCTURED VIEW SELECTED:                                              â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚  â”‚ âœ… Validation Report        â”‚  Format: HLS | Type: Master | VOD      â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚â”‚
â”‚ â”‚  â”‚ No errors found                                                      â”‚ â”‚â”‚
â”‚ â”‚  â”‚ 2 warnings: Only 2 variants, consider adding more                   â”‚ â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚  â”‚ ğŸ“Š Statistics Dashboard                                              â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Variants: 2  â”‚  Bitrate Range: 2.2-8.4 Mbps  â”‚  Duration: 634s      â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Resolution: 960x540 - 1920x1080  â”‚  Codecs: H.264, AAC              â”‚ â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚  â”‚ ğŸ“¶ ABR Ladder Visualization                                          â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8.4 Mbps (1920x1080, 60fps)                    â”‚ â”‚â”‚
â”‚ â”‚  â”‚                                                                       â”‚ â”‚â”‚
â”‚ â”‚  â”‚         âš ï¸ LARGE GAP (3.8x) - Add intermediate variant              â”‚ â”‚â”‚
â”‚ â”‚  â”‚                                                                       â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2.2 Mbps (960x540, 60fps)                                      â”‚ â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  [+18 more analysis sections: Codec Analysis, DRM, Resolution,             â”‚â”‚
â”‚ â”‚   Frame Rate, Protocol Features, Performance Metrics, Variant             â”‚â”‚
â”‚ â”‚   Comparison, Segments, Download Manager, etc.]                           â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  IF TIMELINE VIEW SELECTED:                                                â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚  â”‚ ğŸ¬ Playback Simulation                                               â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Bandwidth: [Stable â–¼] 5 Mbps  [â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€] 10 Mbps                â”‚ â”‚â”‚
â”‚ â”‚  â”‚                                                                       â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Timeline:                                                             â”‚ â”‚â”‚
â”‚ â”‚  â”‚ 0sâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€30sâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€60sâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€90sâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€120s              â”‚ â”‚â”‚
â”‚ â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â† Quality over time   â”‚ â”‚â”‚
â”‚ â”‚  â”‚ High â–²                    â–¼ Switch                                   â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Low  â”‚                                                                â”‚ â”‚â”‚
â”‚ â”‚  â”‚                                                                       â”‚ â”‚â”‚
â”‚ â”‚  â”‚ Quality Switches: 3  â”‚  Rebuffering: 0s  â”‚  Avg Quality: 8.2 Mbps   â”‚ â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow (System 1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM 1: DATA FLOW DIAGRAM                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WEB PAGE
   â”‚
   â”‚ Content Script scans DOM
   â”‚ Finds: <a href="master.m3u8">
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Content Script   â”‚ sendMessage({ action: 'manifests-detected',
â”‚ (content.ts)     â”‚               manifests: [...] })
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service Worker   â”‚ addDetectedManifest(tabId, manifest)
â”‚ (background)     â”‚ Stores in memory: Map<tabId, DetectedManifest[]>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ User clicks manifest in Popup
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Popup            â”‚ Opens: chrome-extension://[id]/viewer.html#[url]
â”‚ (popup.tsx)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Viewer (viewer.tsx)                                                      â”‚
â”‚                                                                          â”‚
â”‚ 1. React mount                                                           â”‚
â”‚ 2. Check window.location.hash                                            â”‚
â”‚ 3. If hash: decode URL â†’ sendMessage to service worker                  â”‚
â”‚ 4. Service Worker: fetch(url) â†’ return manifest content                 â”‚
â”‚ 5. Viewer: parseManifest(content, url)                                  â”‚
â”‚    â”œâ”€ detectFormat() â†’ 'hls' or 'dash'                                  â”‚
â”‚    â”œâ”€ if HLS: parseHLS(content, url)                                    â”‚
â”‚    â””â”€ if DASH: parseDASH(content, url)                                  â”‚
â”‚ 6. Update Zustand store: setManifest(parsed)                            â”‚
â”‚ 7. React re-renders with manifest data                                  â”‚
â”‚ 8. Components read from store:                                          â”‚
â”‚    - RawView (syntax highlighting)                                      â”‚
â”‚    - StructuredView (20+ analysis panels)                               â”‚
â”‚    - TimelineView (simulation)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ANALYSIS UTILITIES (Pure Functions):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manifest Data    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â–º analyzeBitrateLadder() â†’ ABR gaps, recommendations
         â”œâ”€â–º analyzeCodecs() â†’ Codec details, compatibility
         â”œâ”€â–º analyzeResolution() â†’ Quality categorization
         â”œâ”€â–º validateManifest() â†’ Errors, warnings
         â”œâ”€â–º simulatePlayback() â†’ Quality switching behavior
         â”œâ”€â–º detectDRM() â†’ Encryption systems
         â”œâ”€â–º analyzeProtocol() â†’ HLS/DASH features detected
         â””â”€â–º [+15 more utilities]
              â”‚
              â–¼
         Display in UI components
```

### Current System Strengths

âœ… **Comprehensive:** 20+ analysis tools
âœ… **Tested:** 124 unit tests, 62 real URLs tested
âœ… **Visualizations:** ABR ladder, bitrate chart, timeline simulation
âœ… **Export:** JSON, CSV, text reports
âœ… **Production-ready:** Zero critical bugs, 94% coverage

### Current System Weaknesses

âŒ **No automatic URL interception** - User must find manifest
âŒ **Manual loading required** - Can't just click .m3u8 URL and view it
âŒ **No spec compliance validation** - Doesn't validate against HLS/DASH specs
âŒ **Feature-heavy** - May be overwhelming for quick checks

---

## SYSTEM 2: New Vision - "Minimalistic Spec Validator"

### Automatic URL Interception Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SYSTEM 2: AUTOMATIC URL INTERCEPTION FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTION: Clicks .m3u8/.mpd link in browser
   â”‚
   â”‚ Example: <a href="https://cdn.example.com/stream/master.m3u8">Stream</a>
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chrome's declarativeNetRequest API                                       â”‚
â”‚                                                                          â”‚
â”‚ Rule matches: *.m3u8* OR *.mpd*                                         â”‚
â”‚ Action: REDIRECT                                                         â”‚
â”‚ To: chrome-extension://[extension-id]/viewer.html#[original-url]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIEWER OPENS AUTOMATICALLY                                               â”‚
â”‚                                                                          â”‚
â”‚ Instead of: Text file download OR "Can't display file" error            â”‚
â”‚ User sees: Formatted manifest with spec validation                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ALTERNATIVE: Manual URL Entry
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extension    â”‚  User clicks icon
â”‚ Icon [ğŸ¬]    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  SIMPLE POPUP       â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                  â”‚                     â”‚
                  â”‚ Paste manifest URL: â”‚
                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                  â”‚ â”‚ [URL input]     â”‚ â”‚
                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                  â”‚                     â”‚
                  â”‚      [Load]         â”‚
                  â”‚                     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     Opens viewer
```

### Minimalistic Viewer Interface (System 2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYSTEM 2 VIEWER - Spec Validator                          [Settings â–¼]  [?]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ ğŸ¯ HLS Master Playlist                              Spec: RFC 8216â”‚          â”‚
â”‚ â”‚ https://example.com/stream/master.m3u8                            â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ RAW MANIFEST (70%)               â”‚ VALIDATION SIDEBAR (30%)                â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚ 1  #EXTM3U                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ 2  #EXT-X-VERSION:6              â”‚ â”‚ âœ… SPEC COMPLIANT                   â”‚ â”‚â”‚
â”‚ â”‚ 3  #EXT-X-INDEPENDENT-SEGMENTS   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚ 4  #EXT-X-STREAM-INF:BANDWIDTH=  â”‚                                         â”‚â”‚
â”‚ â”‚ 5    2227464,CODECS="avc1.64002  â”‚ ğŸ“‹ Playlist Type                        â”‚â”‚
â”‚ â”‚ 6    0,mp4a.40.2",RESOLUTION=960 â”‚ Master Playlist (Multi-bitrate)         â”‚â”‚
â”‚ â”‚ 7    x540,FRAME-RATE=60.000      â”‚                                         â”‚â”‚
â”‚ â”‚ 8  gear4/prog_index.m3u8         â”‚ ğŸ” Features Detected                    â”‚â”‚
â”‚ â”‚ 9  #EXT-X-STREAM-INF:BANDWIDTH=  â”‚ â€¢ HLS Version 6                         â”‚â”‚
â”‚ â”‚ 10   8400000,CODECS="avc1.64002  â”‚ â€¢ Independent Segments                  â”‚â”‚
â”‚ â”‚ 11   a,mp4a.40.2",RESOLUTION=192 â”‚ â€¢ H.264 High Profile                    â”‚â”‚
â”‚ â”‚ 12   0x1080,FRAME-RATE=60.000    â”‚ â€¢ AAC-LC Audio                          â”‚â”‚
â”‚ â”‚ 13 gear5/prog_index.m3u8         â”‚ â€¢ 60fps HFR Support                     â”‚â”‚
â”‚ â”‚ 14                                â”‚                                         â”‚â”‚
â”‚ â”‚ [Line 14 of 14]  [Copy]           â”‚ âš ï¸ Validation Issues (2)                â”‚â”‚
â”‚ â”‚                                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚â”‚
â”‚ â”‚                                  â”‚ WARNING (Line 4-7):                     â”‚â”‚
â”‚ â”‚                                  â”‚ Only 2 variants detected.               â”‚â”‚
â”‚ â”‚                                  â”‚ Recommend 4-6 for optimal ABR.          â”‚â”‚
â”‚ â”‚                                  â”‚ [HLS Spec: 6.2.4] â†—                     â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ INFO (Line 2):                          â”‚â”‚
â”‚ â”‚                                  â”‚ Version 6 detected. Features:           â”‚â”‚
â”‚ â”‚                                  â”‚ EXT-X-INDEPENDENT-SEGMENTS             â”‚â”‚
â”‚ â”‚                                  â”‚ [HLS Spec: 4.3.3.6] â†—                   â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ ğŸ”— Segment Checking                     â”‚â”‚
â”‚ â”‚                                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚â”‚
â”‚ â”‚                                  â”‚ gear4/prog_index.m3u8                   â”‚â”‚
â”‚ â”‚                                  â”‚   âœ… Exists (200 OK)                    â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ gear5/prog_index.m3u8                   â”‚â”‚
â”‚ â”‚                                  â”‚   âœ… Exists (200 OK)                    â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ [Check All Segments]                    â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ ğŸ’¡ Advanced Validation                  â”‚â”‚
â”‚ â”‚                                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚â”‚
â”‚ â”‚                                  â”‚ Want to validate media                  â”‚â”‚
â”‚ â”‚                                  â”‚ codec compliance?                       â”‚â”‚
â”‚ â”‚                                  â”‚                                         â”‚â”‚
â”‚ â”‚                                  â”‚ [Run Codec Validation] (v1.1)           â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                â”‚
â”‚ Bottom Info Bar:                                                               â”‚
â”‚ 2 variants â”‚ 2 playlists â”‚ HLS v6 â”‚ H.264+AAC â”‚ 60fps â”‚ 540p-1080p            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INTERACTION BEHAVIORS:
- Click warning/error in sidebar â†’ Jumps to that line in manifest (left scrolls)
- Hover over HLS tag â†’ Shows spec definition tooltip
- Click [HLS Spec: X.X.X] link â†’ Opens spec documentation in new tab
- Click [Check All Segments] â†’ Runs HEAD requests on all segment URLs
- Red highlighted lines â†’ Non-compliant elements
- Yellow highlighted lines â†’ Warnings
```

### System 2 Strengths

âœ… **Automatic:** No manual loading - just click .m3u8/.mpd
âœ… **Fast:** Focused on spec validation, minimal UI
âœ… **Educational:** Shows spec violations with references
âœ… **Practical:** Segment existence checking, codec validation

### System 2 Weaknesses

âŒ **Limited analysis:** No ABR ladder, no simulation, no export
âŒ **No comparisons:** Can't compare multiple manifests
âŒ **No visualization:** Text-only, no charts/graphs

---

## SYSTEM 3: Best of Both Worlds - "Unified Manifest Viewer"

### Unified Entry Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM 3: UNIFIED ENTRY POINTS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AUTOMATIC (From System 2):
User clicks .m3u8/.mpd URL â†’ Interception â†’ Viewer opens in "Spec Mode"

MANUAL (From System 1):
User clicks extension icon â†’ Popup â†’ Click detected manifest â†’ Viewer opens in "Analysis Mode"
User uses DevTools panel â†’ Click Analyze â†’ Viewer opens in "Analysis Mode"
User right-clicks link â†’ Analyze â†’ Viewer opens in "Analysis Mode"

DECISION LOGIC:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ How did user arrive at viewer?                              â”‚
â”‚                                                             â”‚
â”‚ IF: URL interception (automatic)                            â”‚
â”‚   â†’ Default to "Spec Validator Mode" (minimalistic)        â”‚
â”‚   â†’ User can toggle to "Deep Analysis Mode"                â”‚
â”‚                                                             â”‚
â”‚ IF: Popup/DevTools/Context menu (manual)                    â”‚
â”‚   â†’ Default to "Deep Analysis Mode" (comprehensive)        â”‚
â”‚   â†’ User can toggle to "Spec Validator Mode"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

This provides context-aware defaults while keeping both modes available.
```

### Dual-Mode Viewer Interface (System 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYSTEM 3 VIEWER - Unified (Dual Mode)            [Spec âŸ· Analysis] [Export â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ URL: https://example.com/stream/master.m3u8                    [Copy]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                â”‚
â”‚ MODE TOGGLE: [Spec Validator â—â”€â”€â—‹ Deep Analysis]   â† Switches entire UI      â”‚
â”‚                                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  WHEN IN "SPEC VALIDATOR" MODE (Minimalistic):                             â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚ â”‚  â”‚ RAW MANIFEST (70%)           â”‚ VALIDATION (30%)                      â”‚  â”‚â”‚
â”‚ â”‚  â”‚                              â”‚                                       â”‚  â”‚â”‚
â”‚ â”‚  â”‚ [Same as System 2]           â”‚ [Same as System 2]                    â”‚  â”‚â”‚
â”‚ â”‚  â”‚ - Line-numbered text         â”‚ - Spec compliance status              â”‚  â”‚â”‚
â”‚ â”‚  â”‚ - Syntax highlighting        â”‚ - Issue list with severity            â”‚  â”‚â”‚
â”‚ â”‚  â”‚ - Red/yellow highlights      â”‚ - Feature detection                   â”‚  â”‚â”‚
â”‚ â”‚  â”‚ - Copyable                   â”‚ - Segment checking                    â”‚  â”‚â”‚
â”‚ â”‚  â”‚                              â”‚ - Spec reference links                â”‚  â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚ â”‚                                                                             â”‚â”‚
â”‚ â”‚  WHEN IN "DEEP ANALYSIS" MODE (Comprehensive):                             â”‚â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚  â”‚ [ Raw ]  [ Structured ]  [ Timeline ]   â† VIEW MODE TABS              â”‚ â”‚â”‚
â”‚ â”‚  â”‚                                                                       â”‚ â”‚â”‚
â”‚ â”‚  â”‚ [Same as System 1]                                                    â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - All 20+ analysis sections                                          â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - ABR ladder visualization                                           â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - Codec analysis, DRM detection                                      â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - Playback simulation                                                â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - Export functionality                                               â”‚ â”‚â”‚
â”‚ â”‚  â”‚ - Comparison tools                                                   â”‚ â”‚â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MODE SWITCHING:
User clicks toggle â†’ Zustand store updates: setViewMode('spec' | 'analysis')
â†’ React re-renders with appropriate UI â†’ Manifest data preserved (already parsed)
```

### Data Flow (System 3 - Integrated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM 3: INTEGRATED DATA FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLOW 1: Automatic Interception
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
User navigates to: https://cdn.example.com/stream/master.m3u8
   â”‚
   â–¼
declarativeNetRequest intercepts
   â”‚
   â–¼
Redirects to: chrome-extension://[id]/viewer.html#https%3A%2F%2Fcdn.example.com%2Fstream%2Fmaster.m3u8
   â”‚
   â–¼
Viewer loads â†’ Parse hash â†’ Fetch manifest â†’ Parse â†’ Store â†’ Render in SPEC MODE
   â”‚
   â”‚ User can toggle to ANALYSIS MODE
   â–¼
Same manifest, different UI


FLOW 2: Manual via Popup/DevTools (Existing)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Content script detects â†’ Service worker stores â†’ Popup shows â†’ User clicks
   â”‚
   â–¼
Opens viewer.html#[url]
   â”‚
   â–¼
Viewer loads â†’ Parse hash â†’ Fetch manifest â†’ Parse â†’ Store â†’ Render in ANALYSIS MODE
   â”‚
   â”‚ User can toggle to SPEC MODE
   â–¼
Same manifest, different UI


SHARED COMPONENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manifest Parser (HLS + DASH)           â”‚ â† Used by both modes
â”‚ - detectFormat()                       â”‚
â”‚ - parseHLS()                           â”‚
â”‚ - parseDASH()                          â”‚
â”‚ - resolveUrls()                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MODE-SPECIFIC COMPONENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPEC MODE Components                   â”‚  â”‚ ANALYSIS MODE Components       â”‚
â”‚ - SpecValidatorView                    â”‚  â”‚ - RawView (System 1)           â”‚
â”‚ - ValidationSidebar                    â”‚  â”‚ - StructuredView (System 1)    â”‚
â”‚ - ComplianceChecker                    â”‚  â”‚ - TimelineView (System 1)      â”‚
â”‚ - SegmentAvailabilityChecker           â”‚  â”‚ - All 25 analysis components   â”‚
â”‚ - SpecReferenceLinks                   â”‚  â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Zustand Store (Extended):
{
  manifest: ParsedManifest,
  loading: boolean,
  error: string | null,
  viewMode: 'spec' | 'analysis',        â† NEW
  selectedView: 'raw' | 'structured' | 'timeline',  â† Analysis mode only
  selectedVariantId: string | null,
  validationResults: ValidationResult[], â† NEW
  segmentAvailability: Map<string, boolean>  â† NEW
}
```

### User Flow Example (System 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SYSTEM 3: TYPICAL USER FLOWS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 1: Developer Debugging Broken Stream
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Developer sees broken stream on website
   â”‚
   â–¼
Right-click manifest link in page source
   â”‚
   â–¼
Click "Analyze with HLS+DASH Viewer"
   â”‚
   â–¼
Viewer opens in ANALYSIS MODE (comprehensive tools)
   â”‚
   â”œâ”€â–º Check Validation Report â†’ See errors
   â”œâ”€â–º Check ABR Ladder â†’ See bitrate gaps
   â”œâ”€â–º Check Codec Analysis â†’ See codec issues
   â””â”€â–º Export report â†’ Share with team


SCENARIO 2: User Browsing Streaming Examples
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
User on DASH-IF reference page
   â”‚
   â–¼
Clicks example manifest link: https://dash.akamaized.net/.../manifest.mpd
   â”‚
   â–¼
AUTOMATIC INTERCEPTION â†’ Viewer opens in SPEC MODE
   â”‚
   â–¼
Sees manifest with validation:
- "âœ… DASH-IF Compliant"
- "Profile: isoff-live"
- "Features: SegmentTemplate, Multi-period"
   â”‚
   â”‚ Wants deeper analysis
   â–¼
Clicks [Spec âŸ· Analysis] toggle
   â”‚
   â–¼
Switches to ANALYSIS MODE
   â”‚
   â””â”€â–º Now sees full analysis tools


SCENARIO 3: Streaming Engineer Optimizing Manifest
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Engineer working on manifest optimization
   â”‚
   â–¼
Opens extension popup
   â”‚
   â–¼
Pastes manifest URL in "History" or input field
   â”‚
   â–¼
Viewer opens in ANALYSIS MODE (default for manual entry)
   â”‚
   â”œâ”€â–º Studies ABR Ladder visualization
   â”œâ”€â–º Runs playback simulation
   â”œâ”€â–º Compares with previous version
   â”œâ”€â–º Exports optimization report
   â”‚
   â”‚ Wants to check spec compliance
   â–¼
Toggles to SPEC MODE
   â”‚
   â””â”€â–º Sees any spec violations, fixes them
```

### System 3 Integration Benefits

âœ… **Automatic viewing:** URL interception (System 2)
âœ… **Comprehensive analysis:** All tools available (System 1)
âœ… **Context-aware:** Smart defaults based on entry point
âœ… **Flexible:** User can switch modes anytime
âœ… **Backwards compatible:** All existing v1.0.0 features preserved
âœ… **Progressive:** Start simple (spec view), go deep if needed

---

## TECHNICAL IMPLEMENTATION: Component Architecture

### Shared Components (Used by All Modes)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SHARED INFRASTRUCTURE                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚ Service Worker (service-worker.ts)                                â”‚
â”‚ â”œâ”€ Message router                                                 â”‚
â”‚ â”œâ”€ Manifest fetcher (fetch + CORS handling)                       â”‚
â”‚ â”œâ”€ Context menu management                                        â”‚
â”‚ â””â”€ Storage coordination                                           â”‚
â”‚                                                                    â”‚
â”‚ Parsers (lib/parsers/)                                            â”‚
â”‚ â”œâ”€ detectFormat(content) â†’ 'hls' | 'dash'                         â”‚
â”‚ â”œâ”€ parseHLS(content, url) â†’ ParsedManifest                        â”‚
â”‚ â”œâ”€ parseDASH(content, url) â†’ ParsedManifest                       â”‚
â”‚ â””â”€ resolveUrls(uri, baseUrl) â†’ absolute URL                       â”‚
â”‚                                                                    â”‚
â”‚ Content Script (content/content-script.ts)                        â”‚
â”‚ â””â”€ DOM detection (existing, still useful for DevTools panel)      â”‚
â”‚                                                                    â”‚
â”‚ URL Interception (NEW for System 2/3)                             â”‚
â”‚ â””â”€ declarativeNetRequest rules in manifest.json                   â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode-Specific Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPEC VALIDATOR MODE (System 2/3)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚ Components:                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ SpecValidatorView.tsx                                               â”‚  â”‚
â”‚ â”‚ â”œâ”€ RawManifestPanel (left 70%)                                      â”‚  â”‚
â”‚ â”‚ â”‚  â”œâ”€ Line numbers                                                  â”‚  â”‚
â”‚ â”‚ â”‚  â”œâ”€ Syntax highlighting                                           â”‚  â”‚
â”‚ â”‚ â”‚  â”œâ”€ Error/warning line highlighting                               â”‚  â”‚
â”‚ â”‚ â”‚  â””â”€ Click line â†’ show details                                     â”‚  â”‚
â”‚ â”‚ â”‚                                                                    â”‚  â”‚
â”‚ â”‚ â””â”€ ValidationSidebar (right 30%)                                    â”‚  â”‚
â”‚ â”‚    â”œâ”€ Compliance status badge                                       â”‚  â”‚
â”‚ â”‚    â”œâ”€ Playlist type identifier                                      â”‚  â”‚
â”‚ â”‚    â”œâ”€ Feature detection list                                        â”‚  â”‚
â”‚ â”‚    â”œâ”€ Validation issue list (sortable by severity)                 â”‚  â”‚
â”‚ â”‚    â”œâ”€ Segment availability checker                                 â”‚  â”‚
â”‚ â”‚    â””â”€ Spec reference links                                          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚ Utilities (NEW):                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ lib/validation/                                                     â”‚  â”‚
â”‚ â”‚ â”œâ”€ hls-spec-validator.ts                                            â”‚  â”‚
â”‚ â”‚ â”‚  â””â”€ validateHLSCompliance(parsed) â†’ ValidationResult[]           â”‚  â”‚
â”‚ â”‚ â”œâ”€ dash-spec-validator.ts                                           â”‚  â”‚
â”‚ â”‚ â”‚  â””â”€ validateDASHCompliance(parsed) â†’ ValidationResult[]          â”‚  â”‚
â”‚ â”‚ â”œâ”€ segment-checker.ts                                               â”‚  â”‚
â”‚ â”‚ â”‚  â””â”€ checkSegmentAvailability(urls[]) â†’ Map<url, status>          â”‚  â”‚
â”‚ â”‚ â””â”€ spec-rules/                                                      â”‚  â”‚
â”‚ â”‚    â”œâ”€ hls-rules.ts (from Apple spec study)                          â”‚  â”‚
â”‚ â”‚    â””â”€ dash-rules.ts (from DASH-IF study)                            â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEEP ANALYSIS MODE (System 1/3)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚ Components: [ALL EXISTING v1.0.0 components - 25 total]                  â”‚
â”‚ â”œâ”€ ViewerHeader                                                           â”‚
â”‚ â”œâ”€ RawView                                                                â”‚
â”‚ â”œâ”€ StructuredView (20+ analysis panels)                                  â”‚
â”‚ â”œâ”€ TimelineView                                                           â”‚
â”‚ â””â”€ [All existing components preserved]                                    â”‚
â”‚                                                                           â”‚
â”‚ Utilities: [ALL EXISTING v1.0.0 utilities - 22 total]                    â”‚
â”‚ â”œâ”€ ABR analysis                                                           â”‚
â”‚ â”œâ”€ Codec analysis                                                         â”‚
â”‚ â”œâ”€ Resolution/framerate analysis                                          â”‚
â”‚ â”œâ”€ DRM detection                                                          â”‚
â”‚ â”œâ”€ Performance metrics                                                    â”‚
â”‚ â””â”€ [All existing utilities preserved]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SHARED STATE (Zustand):
{
  // Existing v1.0.0 state
  manifest: ParsedManifest | null,
  loading: boolean,
  error: string | null,
  selectedView: 'raw' | 'structured' | 'timeline',
  selectedVariantId: string | null,

  // NEW for System 3
  viewMode: 'spec' | 'analysis',
  entryPoint: 'interception' | 'manual',
  validationResults: ValidationResult[],
  segmentAvailability: Map<string, SegmentStatus>
}
```

### Mode Toggle Interaction (System 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SYSTEM 3: MODE SWITCHING BEHAVIOR                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER IN SPEC MODE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Spec Validator â—â”€â”€â—‹ Deep Analysis]                â”‚ â† Toggle is on left
â”‚                                                    â”‚
â”‚ Currently showing: Raw text + Validation sidebar   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ User clicks right side of toggle
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Spec Validator â—‹â”€â”€â— Deep Analysis]                â”‚ â† Toggle moves right
â”‚                                                    â”‚
â”‚ UI transitions to: 3-tab view with full analysis   â”‚
â”‚ - Same manifest (already parsed)                   â”‚
â”‚ - No re-fetch (data in store)                      â”‚
â”‚ - Smooth transition (<100ms)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


USER IN ANALYSIS MODE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Spec Validator â—‹â”€â”€â— Deep Analysis]                â”‚
â”‚                                                    â”‚
â”‚ Currently showing: Structured view with 20+ tools  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ User clicks left side of toggle
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Spec Validator â—â”€â”€â—‹ Deep Analysis]                â”‚
â”‚                                                    â”‚
â”‚ UI transitions to: Raw text + Validation sidebar   â”‚
â”‚ - Same manifest (already parsed)                   â”‚
â”‚ - Runs validation if not already done              â”‚
â”‚ - Checks segment availability if not done          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TRANSITION LOGIC:
const handleModeToggle = () => {
  const newMode = viewMode === 'spec' ? 'analysis' : 'spec';

  setViewMode(newMode);

  // If switching TO spec mode and validation not done yet
  if (newMode === 'spec' && !validationResults.length) {
    runValidation(manifest);
  }

  // If switching TO analysis mode
  if (newMode === 'analysis') {
    // Ensure all analysis utilities run
    // (they're memoized, so only run once)
  }
};
```

### Component Reuse Strategy (System 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SYSTEM 3: COMPONENT REUSE AND NEW COMPONENTS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REUSE FROM v1.0.0 (System 1):                NEW FOR System 2/3:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… All 25 viewer components                   ğŸ†• SpecValidatorView.tsx
âœ… All 22 utility modules                     ğŸ†• ValidationSidebar.tsx
âœ… All parsers (HLS, DASH, unified)           ğŸ†• RawManifestPanel.tsx
âœ… Zustand store (extend with new fields)     ğŸ†• ComplianceChecker.tsx
âœ… Service worker (add interception)          ğŸ†• SegmentAvailabilityChecker.tsx
âœ… All existing tests (124 tests)             ğŸ†• PlaylistTypeBadge.tsx
                                              ğŸ†• FeatureDetectionList.tsx
MODIFY:                                       ğŸ†• SpecReferenceLinkButton.tsx
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              ğŸ†• LineHighlighter.tsx (for errors)
âš ï¸ viewer.tsx (add mode logic)
âš ï¸ manifest-store.ts (add new state)         ğŸ†• Validation Rules:
âš ï¸ ViewerHeader.tsx (add mode toggle)        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ manifest.json (add redirect rules)        ğŸ†• lib/validation/hls-spec-rules.ts
                                              ğŸ†• lib/validation/dash-spec-rules.ts
                                              ğŸ†• lib/validation/hls-validator.ts
                                              ğŸ†• lib/validation/dash-validator.ts
                                              ğŸ†• lib/utils/segment-availability.ts

TESTING STRATEGY:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Keep all 124 existing tests
ğŸ†• Add tests for new validation utilities (~30-40 new tests)
ğŸ†• Add tests for segment availability checking (~5 tests)
ğŸ†• Add Playwright tests for URL interception
ğŸ†• Add tests for mode switching

TARGET: 170+ tests total (124 existing + ~46 new)
```

---

## INTEGRATION ARCHITECTURE DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTEGRATED SYSTEM 3: FULL ARCHITECTURE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER INTERACTIONS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  AUTOMATIC INTERCEPTION              MANUAL ENTRY                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Click .m3u8/.mpd   â”‚              â”‚ Extension icon       â”‚              â”‚
â”‚  â”‚ URL anywhere       â”‚              â”‚ DevTools panel       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ Right-click menu     â”‚              â”‚
â”‚            â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚            â”‚                                    â”‚                          â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                            â”‚                                               â”‚
â”‚                            â–¼                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHROME EXTENSION INFRASTRUCTURE                                            â”‚
â”‚                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ declarativeNetRequest (manifest.json)                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Rule 1: *.m3u8* â†’ redirect to viewer.html#[url]                    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Rule 2: *.mpd* â†’ redirect to viewer.html#[url]                     â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Service Worker (background)                                            â”‚ â”‚
â”‚ â”‚ â”œâ”€ Message Router: handles fetch-manifest, get-detected               â”‚ â”‚
â”‚ â”‚ â”œâ”€ Manifest Fetcher: fetch() with error handling                      â”‚ â”‚
â”‚ â”‚ â”œâ”€ Context Menu: "Analyze" on .m3u8/.mpd links                        â”‚ â”‚
â”‚ â”‚ â””â”€ Storage: Detected manifests, history, settings                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Content Script (content)                                               â”‚ â”‚
â”‚ â”‚ â””â”€ DOM Scanner: Still useful for DevTools panel manifest detection    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIEWER APPLICATION (React)                                                 â”‚
â”‚                                                                            â”‚
â”‚ viewer.tsx (Main Component)                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Mount â†’ Check hash â†’ Parse URL                                     â”‚ â”‚
â”‚ â”‚ 2. Determine entry point:                                             â”‚ â”‚
â”‚ â”‚    if (hash && !referrer.includes('popup')) â†’ 'interception'          â”‚ â”‚
â”‚ â”‚    else â†’ 'manual'                                                    â”‚ â”‚
â”‚ â”‚ 3. Set default mode:                                                  â”‚ â”‚
â”‚ â”‚    entryPoint === 'interception' ? 'spec' : 'analysis'                â”‚ â”‚
â”‚ â”‚ 4. Fetch manifest via service worker                                  â”‚ â”‚
â”‚ â”‚ 5. Parse with unified parser                                          â”‚ â”‚
â”‚ â”‚ 6. Update store                                                       â”‚ â”‚
â”‚ â”‚ 7. Render appropriate mode                                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Zustand Store (manifest-store.ts)                                      â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚ State: {                                                               â”‚ â”‚
â”‚ â”‚   manifest: ParsedManifest | null,                                     â”‚ â”‚
â”‚ â”‚   loading: boolean,                                                    â”‚ â”‚
â”‚ â”‚   error: string | null,                                                â”‚ â”‚
â”‚ â”‚   viewMode: 'spec' | 'analysis',              â† NEW                    â”‚ â”‚
â”‚ â”‚   entryPoint: 'interception' | 'manual',      â† NEW                    â”‚ â”‚
â”‚ â”‚   selectedView: 'raw' | 'structured' | 'timeline',                     â”‚ â”‚
â”‚ â”‚   selectedVariantId: string | null,                                    â”‚ â”‚
â”‚ â”‚   validationResults: ValidationResult[],      â† NEW                    â”‚ â”‚
â”‚ â”‚   segmentAvailability: Map<string, boolean>   â† NEW                    â”‚ â”‚
â”‚ â”‚ }                                                                       â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Actions:                                                                â”‚ â”‚
â”‚ â”‚   setManifest(), setLoading(), setError(),                             â”‚ â”‚
â”‚ â”‚   setViewMode(),                               â† NEW                   â”‚ â”‚
â”‚ â”‚   setValidationResults(),                      â† NEW                   â”‚ â”‚
â”‚ â”‚   setSegmentAvailability(),                    â† NEW                   â”‚ â”‚
â”‚ â”‚   [all existing actions]                                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ SPEC MODE                          â”‚ ANALYSIS MODE                     â”‚ â”‚
â”‚ â”‚ (Minimalistic - System 2)          â”‚ (Comprehensive - System 1)        â”‚ â”‚
â”‚ â”‚                                    â”‚                                   â”‚ â”‚
â”‚ â”‚ if (viewMode === 'spec'):          â”‚ if (viewMode === 'analysis'):     â”‚ â”‚
â”‚ â”‚   render <SpecValidatorView />     â”‚   render <ViewerHeader />         â”‚ â”‚
â”‚ â”‚                                    â”‚   render selected view:           â”‚ â”‚
â”‚ â”‚ NEW components (8):                â”‚     - <RawView />                 â”‚ â”‚
â”‚ â”‚ - SpecValidatorView                â”‚     - <StructuredView />          â”‚ â”‚
â”‚ â”‚ - ValidationSidebar                â”‚     - <TimelineView />            â”‚ â”‚
â”‚ â”‚ - RawManifestPanel                 â”‚                                   â”‚ â”‚
â”‚ â”‚ - ComplianceChecker                â”‚   EXISTING components (25):       â”‚ â”‚
â”‚ â”‚ - SegmentAvailabilityChecker       â”‚   [All current v1.0.0 components] â”‚ â”‚
â”‚ â”‚ - PlaylistTypeBadge                â”‚                                   â”‚ â”‚
â”‚ â”‚ - FeatureDetectionList             â”‚                                   â”‚ â”‚
â”‚ â”‚ - LineHighlighter                  â”‚                                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DETAILED WIREFRAME: System 3 Spec Validator Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HLS + DASH Manifest Viewer            [Spec Validator â—â”€â”€â—‹ Deep Analysis] [âš™ï¸] [?]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ https://devstreaming-cdn.apple.com/.../master.m3u8           [Copy URL]        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ RAW MANIFEST TEXT (70%)                â”‚ SPEC VALIDATION (30%)                    â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚  1  #EXTM3U                            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  2  #EXT-X-VERSION:6                   â”‚ â”‚ âœ… HLS SPEC COMPLIANT                â”‚ â”‚ â”‚
â”‚ â”‚  3  #EXT-X-INDEPENDENT-SEGMENTS        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚  4  #EXT-X-STREAM-INF:BANDWIDTH=       â”‚                                          â”‚ â”‚
â”‚ â”‚  5    2227464,CODECS="avc1.640020,     â”‚ ğŸ“‹ Playlist Classification               â”‚ â”‚
â”‚ â”‚  6    mp4a.40.2",RESOLUTION=960x540,   â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚ â”‚
â”‚ â”‚  7    FRAME-RATE=60.000                â”‚ Type: Master Playlist                    â”‚ â”‚
â”‚ â”‚  8  gear4/prog_index.m3u8              â”‚ Contains: 2 variant streams              â”‚ â”‚
â”‚ â”‚  9  #EXT-X-STREAM-INF:BANDWIDTH=       â”‚ Purpose: Adaptive bitrate selection      â”‚ â”‚
â”‚ â”‚ 10    8400000,CODECS="avc1.64002a,     â”‚                                          â”‚ â”‚
â”‚ â”‚ 11    mp4a.40.2",RESOLUTION=1920x1080, â”‚ ğŸ” HLS Features in Use                   â”‚ â”‚
â”‚ â”‚ 12    FRAME-RATE=60.000                â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚ â”‚
â”‚ â”‚ 13 gear5/prog_index.m3u8               â”‚ âœ“ Version 6 (Latest)                     â”‚ â”‚
â”‚ â”‚ 14                                     â”‚ âœ“ EXT-X-INDEPENDENT-SEGMENTS             â”‚ â”‚
â”‚ â”‚                                        â”‚ âœ“ FRAME-RATE specified                   â”‚ â”‚
â”‚ â”‚ [Line 14 of 14]                        â”‚ âœ“ High Frame Rate (60fps)                â”‚ â”‚
â”‚ â”‚                                        â”‚ âœ“ H.264 High Profile                     â”‚ â”‚
â”‚ â”‚ [Copy Manifest]                        â”‚ âœ“ AAC-LC Audio                           â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ âš ï¸ Validation Warnings (2)               â”‚ â”‚
â”‚ â”‚                                        â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚ â”‚
â”‚ â”‚                                        â”‚ âš ï¸ Line 4-13: Low variant count          â”‚ â”‚
â”‚ â”‚                                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ Only 2 variants detected.            â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ Recommended: 4-6 variants for        â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ optimal adaptive bitrate streaming.  â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚                                      â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ Spec Reference:                      â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ [HLS RFC 8216 Â§ 6.2.4] â†—             â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ [Apple HLS Guide] â†—                  â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ âš ï¸ Line 5-6: Bitrate gap detected        â”‚ â”‚
â”‚ â”‚                                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ Large gap (3.8x) between variants.   â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ 2.2 Mbps â†’ 8.4 Mbps                  â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ Add intermediate ~4-5 Mbps variant.  â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚                                      â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚ [Learn More] â†—                       â”‚ â”‚ â”‚
â”‚ â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ ğŸ”— Variant Playlist Availability         â”‚ â”‚
â”‚ â”‚                                        â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚ â”‚
â”‚ â”‚                                        â”‚ gear4/prog_index.m3u8                    â”‚ â”‚
â”‚ â”‚                                        â”‚   Status: âœ… Exists (200 OK, 2.3 KB)     â”‚ â”‚
â”‚ â”‚                                        â”‚   URL: .../gear4/prog_index.m3u8         â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ gear5/prog_index.m3u8                    â”‚ â”‚
â”‚ â”‚                                        â”‚   Status: âœ… Exists (200 OK, 2.5 KB)     â”‚ â”‚
â”‚ â”‚                                        â”‚   URL: .../gear5/prog_index.m3u8         â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ [Check All Segments] (Recursive)         â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ ğŸ’¡ Advanced Options                      â”‚ â”‚
â”‚ â”‚                                        â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚ â”‚
â”‚ â”‚                                        â”‚ [ ] Enable media codec validation (v1.1) â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â”‚                                        â”‚ Validate that actual media files         â”‚ â”‚
â”‚ â”‚                                        â”‚ match declared codecs (avc1, mp4a)       â”‚ â”‚
â”‚ â”‚                                        â”‚                                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”‚ Bottom Status Bar:                                                                    â”‚
â”‚ ğŸ¬ HLS v6 â”‚ Master â”‚ 2 variants â”‚ H.264+AAC â”‚ 60fps â”‚ 540p-1080p â”‚ âš ï¸ 2 warnings     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLICK BEHAVIORS:
- Click warning in sidebar â†’ Scrolls to line 4-13 in left panel
- Click [HLS RFC 8216 Â§ 6.2.4] â†’ Opens spec in new tab
- Click [Check All Segments] â†’ Runs HEAD requests, updates availability status
- Click line number â†’ Selects that line, shows detail popup if element has validation issue
- Click [Copy Manifest] â†’ Copies entire text to clipboard
```

---

## DETAILED WIREFRAME: System 3 Deep Analysis Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HLS + DASH Manifest Viewer            [Spec Validator â—‹â”€â”€â— Deep Analysis] [Export â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ https://devstreaming-cdn.apple.com/.../master.m3u8           [Copy URL]        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  [ Raw ]  [ Structured ]  [ Timeline ]     â† VIEW TABS (Analysis mode only)       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”‚ STRUCTURED VIEW SELECTED (Default in Analysis mode):                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ âœ… Validation Report                              Format: HLS â”‚ Type: Master â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Healthy: No errors found                                                    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ 2 warnings: Low variant count, Large bitrate gap                           â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“Š Statistics Dashboard                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Variants: 2 â”‚ Bitrate: 2.2-8.4 Mbps â”‚ Resolution: 540p-1080p â”‚ Duration: 634s â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“¶ ABR Ladder Visualization                                                 â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8.4 Mbps (1920x1080, 60fps) H.264 High                â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚         âš ï¸ LARGE GAP (3.8x) - Consider adding 4-5 Mbps variant             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2.2 Mbps (960x540, 60fps) H.264 High                                 â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ [... 18+ more analysis sections below ...]                                      â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â”‚ - Bitrate Distribution Chart                                                    â”‚ â”‚
â”‚ â”‚ - Codec Information Panel                                                       â”‚ â”‚
â”‚ â”‚ - Bandwidth Calculator                                                          â”‚ â”‚
â”‚ â”‚ - Performance Metrics                                                           â”‚ â”‚
â”‚ â”‚ - Variant Comparison                                                            â”‚ â”‚
â”‚ â”‚ - Resolution Analysis                                                           â”‚ â”‚
â”‚ â”‚ - Frame Rate Analysis                                                           â”‚ â”‚
â”‚ â”‚ - Protocol Information                                                          â”‚ â”‚
â”‚ â”‚ - DRM Information                                                               â”‚ â”‚
â”‚ â”‚ - URL Analysis                                                                  â”‚ â”‚
â”‚ â”‚ - Variant List                                                                  â”‚ â”‚
â”‚ â”‚ - Segment List                                                                  â”‚ â”‚
â”‚ â”‚ - Download Manager                                                              â”‚ â”‚
â”‚ â”‚                                                                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”‚ [Quick Actions FAB âš¡]                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INTERACTION: Toggle to Spec Mode
User clicks [Spec Validator â—â”€â”€â—‹ Deep Analysis] toggle
   â”‚
   â–¼
UI transitions to minimalistic layout (previous wireframe)
Same manifest data, different presentation
```

---

## CALL FLOW DIAGRAMS

### System 1: Manual Load (Current)

```
User Action: Click detected manifest in popup
   â”‚
   â–¼
Open viewer.html#[url]
   â”‚
   â–¼
Viewer.tsx mount
   â”‚
   â–¼
Parse hash â†’ Extract URL
   â”‚
   â–¼
sendMessage to service worker: { action: 'fetch-manifest', url }
   â”‚
   â–¼
Service Worker: fetch(url)
   â”‚
   â–¼
Return manifest content
   â”‚
   â–¼
Viewer: detectFormat(content)
   â”‚
   â”œâ”€â–º If 'hls': parseHLS(content, url)
   â””â”€â–º If 'dash': parseDASH(content, url)
   â”‚
   â–¼
Store in Zustand: setManifest(parsed)
   â”‚
   â–¼
React renders: StructuredView (default)
   â”‚
   â–¼
All analysis utilities run (memoized):
- analyzeBitrateLadder(manifest.variants)
- analyzeCodecs(manifest.variants)
- validateManifest(manifest)
- etc.
   â”‚
   â–¼
Display 20+ analysis panels
```

### System 2/3: Automatic Interception (New)

```
User Action: Click .m3u8 link in browser address bar or on page
   â”‚
   â–¼
Chrome intercepts with declarativeNetRequest
   â”‚
   â–¼
Match rule: *.m3u8*
   â”‚
   â–¼
Redirect to: chrome-extension://[id]/viewer.html#[original-url]
   â”‚
   â–¼
Viewer.tsx mount
   â”‚
   â–¼
Parse hash â†’ Extract URL
Detect entryPoint: 'interception' (no popup referrer)
Set default viewMode: 'spec'
   â”‚
   â–¼
sendMessage to service worker: { action: 'fetch-manifest', url }
   â”‚
   â–¼
Service Worker: fetch(url)
   â”‚
   â–¼
Return manifest content
   â”‚
   â–¼
Viewer: parseManifest(content, url)
   â”‚
   â–¼
Store in Zustand: setManifest(parsed), setViewMode('spec')
   â”‚
   â–¼
React renders: SpecValidatorView
   â”‚
   â–¼
Run validation:
- validateHLSCompliance(manifest) â†’ ValidationResult[]
- OR validateDASHCompliance(manifest)
- checkSegmentAvailability(manifest.segments)
   â”‚
   â–¼
Display: Raw text (left) + Validation sidebar (right)
   â”‚
   â”‚ User can toggle to Analysis mode
   â–¼
Same data, switch to comprehensive view
```

### System 3: Mode Toggle Handling

```
User in SPEC MODE, clicks toggle to ANALYSIS MODE:
   â”‚
   â–¼
handleModeToggle()
   â”‚
   â–¼
setViewMode('analysis')
   â”‚
   â–¼
React re-renders
   â”‚
   â”œâ”€â–º Unmount: SpecValidatorView
   â””â”€â–º Mount: ViewerHeader + StructuredView
   â”‚
   â–¼
Manifest already in store (no re-fetch)
All analysis utilities run (memoized - instant if already calculated)
   â”‚
   â–¼
Display comprehensive analysis


User in ANALYSIS MODE, clicks toggle to SPEC MODE:
   â”‚
   â–¼
handleModeToggle()
   â”‚
   â–¼
setViewMode('spec')
   â”‚
   â–¼
Check if validation already done
   â”‚
   â”œâ”€â–º If yes: Use cached results
   â””â”€â–º If no: Run validation now
   â”‚
   â–¼
React re-renders
   â”‚
   â”œâ”€â–º Unmount: ViewerHeader + StructuredView
   â””â”€â–º Mount: SpecValidatorView
   â”‚
   â–¼
Display minimalistic spec view
```

---

## COMPARISON TABLE

| Feature | System 1 (Current) | System 2 (Minimalistic) | System 3 (Integrated) |
|---------|-------------------|------------------------|----------------------|
| **URL Interception** | âŒ No | âœ… Yes | âœ… Yes |
| **Manual Loading** | âœ… Yes | âœ… Yes | âœ… Yes |
| **Spec Validation** | Partial | âœ… Full | âœ… Full |
| **ABR Analysis** | âœ… Yes | âŒ No | âœ… Yes (in Analysis mode) |
| **Playback Simulation** | âœ… Yes | âŒ No | âœ… Yes (in Analysis mode) |
| **Export Tools** | âœ… Yes | âŒ No | âœ… Yes (in Analysis mode) |
| **Segment Checking** | âŒ No | âœ… Yes | âœ… Yes (in both modes) |
| **Spec References** | âŒ No | âœ… Yes | âœ… Yes (in Spec mode) |
| **Line Highlighting** | âŒ No | âœ… Yes | âœ… Yes (in Spec mode) |
| **Complexity** | High | Low | Medium (dual mode) |
| **Learning Curve** | Steep | Gentle | Progressive |
| **Target User** | Engineers | Developers | Both |
| **Code Reuse** | N/A | ~30% | ~95% from v1.0.0 |

---

## IMPLEMENTATION STRATEGY FOR SYSTEM 3

### Phase 1: Research & Specification (Weeks 1-2)

**Research HLS Specification:**
- Read /usr/local/share/hlstools/readme.rtf completely
- Study Apple HLS specification documentation
- Analyze Apple Media Stream Validator rules
- Document all HLS tags, valid values, version differences
- Create validation rule set for HLS
- Save to memory MCP: "hls-spec-complete-knowledge"

**Research DASH Specification:**
- Clone https://github.com/Dash-Industry-Forum/DASH-IF-Conformance
- Study DASH-IF conformance validation logic
- Read MPEG-DASH ISO specification
- Document MPD element requirements and relationships
- Create validation rule set for DASH
- Save to memory MCP: "dash-spec-complete-knowledge"

**Deliverable:** Comprehensive spec documentation (3000+ lines) in docs/SPECIFICATION.md

### Phase 2: URL Interception (Week 3)

**Implementation:**
- Add declarativeNetRequest redirect rules to manifest.json
- Implement entryPoint detection in viewer.tsx
- Add default mode selection logic
- Test automatic redirection with .m3u8/.mpd URLs
- Verify existing manual loading still works

**Testing:**
- Test interception with 10+ URLs
- Verify redirect works correctly
- Ensure hash parsing handles encoded URLs
- Test toggle between auto/manual entry points

### Phase 3: Spec Validation Implementation (Weeks 4-5)

**HLS Validator:**
- Implement lib/validation/hls-spec-validator.ts
- Rules for master playlist compliance
- Rules for media playlist compliance
- Version-specific feature validation
- Codec string format validation
- TDD: Write 30+ tests for HLS validation

**DASH Validator:**
- Implement lib/validation/dash-spec-validator.ts
- MPD schema validation rules
- Period/AdaptationSet/Representation hierarchy validation
- SegmentTemplate/List/Base validation
- Profile-specific compliance checking
- TDD: Write 30+ tests for DASH validation

### Phase 4: Spec Mode UI (Week 6)

**Components:**
- SpecValidatorView.tsx (main container)
- RawManifestPanel.tsx (left side with line numbers and highlighting)
- ValidationSidebar.tsx (right side with issues and features)
- PlaylistTypeBadge.tsx (Master vs Media identification)
- FeatureDetectionList.tsx (HLS version, DASH profile, codecs)
- LineHighlighter.tsx (red/yellow highlighting for issues)
- SpecReferenceLinkButton.tsx (links to spec sections)

### Phase 5: Segment Availability Checking (Week 7)

**Implementation:**
- lib/utils/segment-availability-checker.ts
- HEAD request to each segment URL
- 404 detection, CORS handling
- Display status in validation sidebar
- Recursive checking (master â†’ media â†’ segments)

### Phase 6: Mode Toggle & Integration (Week 8)

**Implementation:**
- Add viewMode to Zustand store
- Implement mode toggle in ViewerHeader
- Add transition logic
- Ensure all existing features work in Analysis mode
- Test mode switching preserves manifest data

### Phase 7: Testing & Polish (Week 9)

**Testing:**
- Run all 124 existing tests (must pass)
- Add ~60 new tests for spec validation
- Test URL interception end-to-end
- Test mode switching
- Test with all 62 collected URLs in both modes
- Playwright tests for new flows

**Target:** 184+ tests total, >90% coverage

### Phase 8: Documentation (Week 10)

**Documentation:**
- Update all docs to reflect dual-mode system
- Document URL interception feature
- Document spec validation rules
- Update user guide with mode explanations
- Create migration guide from v1.0.0 to v1.1

---

## RECOMMENDATION

**Build System 3 (Integrated Dual-Mode System)**

**Rationale:**
1. **Preserves all v1.0.0 work** - 114 commits, 124 tests, 19K docs not wasted
2. **Adds requested features** - URL interception, spec validation, segment checking
3. **Best user experience** - Automatic viewing + deep analysis available
4. **Additive change** - Low risk, high value
5. **Clear upgrade path** - v1.0.0 â†’ v1.1.0 with new features

**Next Steps:**
1. Read Apple HLS tools documentation at /usr/local/share/hlstools/
2. Study DASH-IF Conformance repository
3. Write comprehensive 3000+ line specification document
4. Implement in phases (10 weeks estimated)
5. Maintain TDD approach for all new code
6. Test with same 62 URLs that passed in current v1.0.0

This approach respects the work done, addresses your new vision, and creates a superior product.
